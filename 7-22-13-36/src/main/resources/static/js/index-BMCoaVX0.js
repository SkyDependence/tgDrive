const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LoginPage-UAZknS9M.js","./vue-vendor-BrR667iQ.js","./element-plus-p6bCxHry.js","./request-ByDjFvYQ.js","./utils-CuRI1GyR.js","../assets/LoginPage-CdllvO9P.css","../assets/el-input-xELmWcEC.css","../assets/el-checkbox-DIPHKmvR.css","./UploadPage-CTnD719u.js","../assets/UploadPage-ZQKD1oL2.css","../assets/el-collapse-transition-Ds2mGN2S.css","../assets/el-empty-D4ZqTl4F.css","../assets/el-card-fwQOLwdi.css","../assets/el-upload-q8uObtwj.css","./AboutPage-cGQmubvk.js","../assets/AboutPage-Dqhbo-6T.css","../assets/el-tag-DljBBxJR.css","./Home-Dgb7ytGW.js","../assets/Home-BPjHZHpn.css","../assets/el-descriptions-item-B5Z46VRV.css","../assets/el-divider-BUtF_RGI.css","../assets/el-select-BaQA8IKP.css","./FileList-DnraZ6Ho.js","../assets/FileList-DmOtikbk.css","./ChangePassword-C_CGscir.js","../assets/ChangePassword-Dcau3JGp.css","./BackupPage-CI6kfu-G.js","../assets/BackupPage-X6Af5IqU.css","./BotKeepAlivePage-J-ZRscKY.js","../assets/BotKeepAlivePage-BVBmDVlb.css","../assets/el-alert-B9oGCRyi.css","./WebDavConfigPage-BunD0gyU.js","../assets/WebDavConfigPage-BQ-MNnn1.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,l)=>((t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l)(t,"symbol"!=typeof a?a+"":a,l),a=(e,t,a)=>new Promise((l,o)=>{var s=e=>{try{r(a.next(e))}catch(t){o(t)}},n=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,n);r((a=a.apply(e,t)).next())});import{a as l,p as o,b as s,f as n,v as r,M as i,U as u,O as d,u as c,q as p,t as m,T as g,a2 as h,S as f,R as v,F as _,a8 as k,I as w,W as y,a6 as b,A as C,ai as T,o as P,ax as x,Q as E,ay as S,P as U,V as A,az as L,aA as I,au as q}from"./vue-vendor-BrR667iQ.js";import{a as R}from"./utils-CuRI1GyR.js";import{E as M,u as z,c as O,a as B,b as j,d as D,e as F,f as V,g as N,h as W,i as $,s as G,m as K,j as Q,k as H,l as J,n as X,o as Y,p as Z,q as ee,r as te,t as ae,v as le,w as oe,x as se,y as ne,z as re,A as ie,B as ue,C as de,D as ce,F as pe,G as me,H as ge,I as he,J as fe,K as ve}from"./element-plus-p6bCxHry.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const _e=new class{constructor(){t(this,"uploadProgress",l([])),t(this,"uploadedFiles",l([])),t(this,"isUploading",l(!1)),t(this,"uploadCompletedCount",l(0)),t(this,"websocket",null),t(this,"uploadQueue",[]),t(this,"currentUploads",new Map),this.connectWebSocket()}addFiles(e){this.uploadQueue.push(...e)}startUpload(e){return a(this,null,function*(){if(this.isUploading.value)return void M.warning("已有上传任务在进行中");this.isUploading.value=!0,this.uploadCompletedCount.value=0,this.uploadedFiles.value=[],this.uploadProgress.value=e.map(e=>({uid:e.uid,name:e.name,percentage:0,status:void 0,loaded:0,total:e.size,canCancel:!0,serverToTelegram:{percentage:0,currentChunk:0,totalChunks:0,status:"waiting"}}));const t=e.map(e=>this.uploadSingleFile(e));try{yield Promise.allSettled(t)}finally{this.isUploading.value=!1,this.currentUploads.clear()}})}uploadSingleFile(e){return a(this,null,function*(){var t,a;const l=this.uploadProgress.value.find(t=>t.uid===e.uid);if(!l)return;const o=new AbortController;this.currentUploads.set(e.uid,o),l.abortController=o;try{const t=new FormData;t.append("file",e.raw);const a=yield R.post("/api/upload",t,{timeout:216e5,signal:o.signal,onUploadProgress:e=>{if(e.total&&!o.signal.aborted){l.loaded=e.loaded,l.total=e.total;const t=Math.round(e.loaded/e.total*1e4)/100;l.percentage=t}}});if(o.signal.aborted)return;const{code:s,msg:n,data:r}=a.data;1===s?(l.serverToTelegram.status="uploading",l.canCancel=!1,this.uploadedFiles.value.push(r),this.uploadCompletedCount.value++):(l.status="exception",M.error(`${e.name} 上传失败: ${n||"未知错误"}`))}catch(s){if("AbortError"===s.name||"ERR_CANCELED"===s.code)l.status="exception",M.info(`${e.name} 上传已取消`);else{l.status="exception";const o=(null==(a=null==(t=s.response)?void 0:t.data)?void 0:a.msg)||s.message||"网络错误";M.error(`${e.name} 上传失败: ${o}`)}}finally{this.currentUploads.delete(e.uid)}})}cancelUpload(e){const t=this.currentUploads.get(e);if(t){t.abort(),this.currentUploads.delete(e);const a=this.uploadProgress.value.find(t=>t.uid===e);a&&(a.status="exception",a.canCancel=!1)}}cancelAllUploads(){this.currentUploads.forEach((e,t)=>{e.abort();const a=this.uploadProgress.value.find(e=>e.uid===t);a&&(a.status="exception",a.canCancel=!1)}),this.currentUploads.clear(),this.isUploading.value=!1}clearCompleted(){this.uploadProgress.value=this.uploadProgress.value.filter(e=>"success"!==e.status&&"exception"!==e.status)}clearAll(){this.uploadProgress.value=[],this.uploadedFiles.value=[],this.uploadCompletedCount.value=0}connectWebSocket(){var e;if((null==(e=this.websocket)?void 0:e.readyState)===WebSocket.OPEN)return;const t=`ws://${window.location.host}/ws/upload-progress`;this.websocket=new WebSocket(t),this.websocket.onmessage=e=>{try{const t=JSON.parse(e.data);if("upload_progress"===t.type){const e=this.uploadProgress.value.find(e=>e.name===t.fileName);e&&"completed"!==e.serverToTelegram.status&&("waiting"===e.serverToTelegram.status&&(e.serverToTelegram.status="uploading"),e.serverToTelegram.percentage=Math.round(100*t.percentage)/100,void 0!==t.currentChunk&&(e.serverToTelegram.currentChunk=t.currentChunk),void 0!==t.totalChunks&&(e.serverToTelegram.totalChunks=t.totalChunks),e.percentage=Math.round(100*t.percentage)/100)}else if("upload_complete"===t.type){const e=this.uploadProgress.value.find(e=>e.name===t.fileName);e&&(e.serverToTelegram.status="completed",e.serverToTelegram.percentage=100,e.status="success",e.percentage=100,e.canCancel=!1,M.success(`${t.fileName} 完全上传完成`))}else if("upload_error"===t.type){const e=this.uploadProgress.value.find(e=>e.name===t.fileName);e&&(e.status="exception",e.serverToTelegram.status="error",e.canCancel=!1),M.error(`${t.fileName} 传输到Telegram失败: ${t.error}`)}}catch(t){}},this.websocket.onerror=e=>{},this.websocket.onclose=()=>{setTimeout(()=>{var e;(null==(e=this.websocket)?void 0:e.readyState)!==WebSocket.OPEN&&this.connectWebSocket()},3e3)}}disconnect(){this.websocket&&(this.websocket.close(),this.websocket=null)}getUploadStatus(){return{isUploading:this.isUploading.value,totalFiles:this.uploadProgress.value.length,completedFiles:this.uploadCompletedCount.value,activeUploads:this.currentUploads.size}}},ke=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB","TB"][t]},we={class:"header-left"},ye={class:"title"},be={class:"header-actions"},Ce={key:0,class:"status-content"},Te={key:0,class:"overall-progress"},Pe={class:"progress-text"},xe={class:"file-list"},Ee={class:"file-info"},Se={class:"file-name"},Ue={class:"file-size"},Ae={class:"file-progress"},Le={key:0,class:"telegram-progress"},Ie={class:"telegram-text"},qe={class:"file-actions"},Re={class:"status-actions"},Me=(e,t)=>{const a=e.__vccOpts||e;for(const[l,o]of t)a[l]=o;return a},ze=Me(o({__name:"GlobalUploadStatus",setup(e,{expose:t}){const a=l(!1),o=l(!1);s(()=>_e.uploadProgress.value.length,e=>{e>0&&(a.value=!0)},{immediate:!0});const C=n(()=>{const e=_e.uploadProgress.value.length;if(0===e)return 0;const t=_e.uploadProgress.value.filter(e=>"success"===e.status).length;return Math.round(t/e*100)}),T=()=>{o.value=!o.value},P=()=>{_e.isUploading.value?W.confirm("当前有文件正在上传，关闭状态窗口不会停止上传。确定关闭吗？","确认关闭",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.value=!1}).catch(()=>{}):a.value=!1},x=()=>{W.confirm("确定要取消所有正在上传的文件吗？","确认取消",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{_e.cancelAllUploads(),M.info("已取消所有上传任务")}).catch(()=>{})},E=()=>{_e.clearCompleted(),0===_e.uploadProgress.value.length&&(a.value=!1)},S=()=>{_e.clearAll(),a.value=!1};return t({show:()=>{a.value=!0},hide:()=>{a.value=!1},toggle:()=>{a.value=!a.value}}),(e,t)=>{const l=F,s=V,n=N;return r(),i(b,{to:"body"},[u(y,{name:"upload-status"},{default:d(()=>[a.value&&(c(_e).isUploading.value||c(_e).uploadProgress.value.length>0)?(r(),p("div",{key:0,class:w(["global-upload-status",{minimized:o.value}])},[m("div",{class:"status-header",onClick:T},[m("div",we,[u(l,{class:"upload-icon"},{default:d(()=>[c(_e).isUploading.value?(r(),i(c(z),{key:0})):(r(),i(c(O),{key:1}))]),_:1}),m("span",ye,g(c(_e).isUploading.value?"上传中":"上传完成")+" ("+g(c(_e).uploadCompletedCount.value)+"/"+g(c(_e).uploadProgress.value.length)+") ",1)]),m("div",be,[c(_e).isUploading.value?(r(),i(s,{key:0,text:"",type:"danger",size:"small",onClick:h(x,["stop"])},{default:d(()=>t[0]||(t[0]=[f(" 全部取消 ")])),_:1})):v("",!0),u(s,{text:"",size:"small",onClick:h(T,["stop"])},{default:d(()=>[u(l,null,{default:d(()=>[o.value?(r(),i(c(B),{key:0})):(r(),i(c(j),{key:1}))]),_:1})]),_:1}),u(s,{text:"",size:"small",onClick:h(P,["stop"])},{default:d(()=>[u(l,null,{default:d(()=>[u(c(D))]),_:1})]),_:1})])]),o.value?v("",!0):(r(),p("div",Ce,[c(_e).isUploading.value?(r(),p("div",Te,[u(n,{percentage:C.value,"stroke-width":6,striped:"","striped-flow":""},null,8,["percentage"]),m("div",Pe," 总进度: "+g(c(_e).uploadCompletedCount.value)+"/"+g(c(_e).uploadProgress.value.length)+" 文件 ",1)])):v("",!0),m("div",xe,[(r(!0),p(_,null,k(c(_e).uploadProgress.value,e=>(r(),p("div",{key:e.uid,class:"file-item"},[m("div",Ee,[m("div",Se,g(e.name),1),m("div",Ue,g(c(ke)(e.loaded))+" / "+g(c(ke)(e.total)),1)]),m("div",Ae,[u(n,{percentage:Math.round(100*e.percentage)/100,status:e.status,"stroke-width":4,"show-text":!1,striped:"","striped-flow":"success"!==e.status&&"exception"!==e.status},null,8,["percentage","status","striped-flow"]),"uploading"===e.serverToTelegram.status?(r(),p("div",Le,[m("div",Ie," 传输到Telegram: "+g(e.serverToTelegram.currentChunk||0)+"/"+g(e.serverToTelegram.totalChunks||0)+" 片 ",1),u(n,{percentage:Math.round(100*e.serverToTelegram.percentage)/100,"stroke-width":2,"show-text":!1,striped:"","striped-flow":""},null,8,["percentage"])])):v("",!0)]),m("div",qe,[e.canCancel&&c(_e).isUploading.value?(r(),i(s,{key:0,text:"",type:"danger",size:"small",onClick:t=>{return a=e.uid,void _e.cancelUpload(a);var a}},{default:d(()=>t[1]||(t[1]=[f(" 取消 ")])),_:2},1032,["onClick"])):"success"===e.status?(r(),i(l,{key:1,class:"success-icon"},{default:d(()=>[u(c(O))]),_:1})):"exception"===e.status?(r(),i(l,{key:2,class:"error-icon"},{default:d(()=>[u(c(D))]),_:1})):v("",!0)])]))),128))]),m("div",Re,[c(_e).isUploading.value?v("",!0):(r(),i(s,{key:0,size:"small",onClick:E},{default:d(()=>t[2]||(t[2]=[f(" 清除已完成 ")])),_:1})),c(_e).isUploading.value?v("",!0):(r(),i(s,{key:1,size:"small",onClick:S},{default:d(()=>t[3]||(t[3]=[f(" 清除全部 ")])),_:1}))])]))],2)):v("",!0)]),_:1})])}}}),[["__scopeId","data-v-babe5484"]]),Oe=o({__name:"App",setup:e=>(C(()=>{_e.disconnect()}),(e,t)=>{const a=T("router-view");return r(),p(_,null,[u(a),u(ze,{ref:"globalUploadStatus"},null,512)],64)})}),Be={},je=function(e,t,a){let l=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),s=(null==o?void 0:o.nonce)||(null==o?void 0:o.getAttribute("nonce"));l=Promise.allSettled(t.map(t=>{if(t=function(e,t){return new URL(e,t).href}(t,a),t in Be)return;Be[t]=!0;const l=t.endsWith(".css"),o=l?'[rel="stylesheet"]':"";if(!!a)for(let a=e.length-1;a>=0;a--){const o=e[a];if(o.href===t&&(!l||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${t}"]${o}`))return;const n=document.createElement("link");return n.rel=l?"stylesheet":"modulepreload",l||(n.as="script"),n.crossOrigin="",n.href=t,s&&n.setAttribute("nonce",s),document.head.appendChild(n),l?new Promise((e,a)=>{n.addEventListener("load",e),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return l.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})},De={class:"header-content"},Fe={class:"logo"},Ve={class:"actions"},Ne={class:"el-dropdown-link",style:{outline:"none",cursor:"pointer"}},We={class:"header-logo"},$e={class:"logo-container"},Ge={class:"logo-text hidden-xs-only"},Ke={class:"header-actions"},Qe={class:"el-dropdown-link"},He=()=>je(()=>import("./LoginPage-UAZknS9M.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),Je=[{path:"/",component:Me(o({__name:"Layout",setup(e){const t=x(),a=l("auto"),o=n(()=>!!localStorage.getItem("token")),s=n(()=>"light"===a.value?G:"dark"===a.value?K:Q),p=()=>{if("auto"===a.value){const e=window.matchMedia("(prefers-color-scheme: dark)");document.documentElement.classList.toggle("dark",e.matches)}else document.documentElement.classList.toggle("dark","dark"===a.value)},g=e=>{a.value=e,localStorage.setItem("theme",e),p()},h=e=>{"auto"===a.value&&document.documentElement.classList.toggle("dark",e.matches)};P(()=>{const e=localStorage.getItem("theme");a.value=e||"auto",p(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",h)}),C(()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",h)});const v=()=>{t.push("/login")},_=()=>{t.push("/about")},k=()=>{const e=localStorage.getItem("token"),a=localStorage.getItem("role");e&&"visitor"!==a?t.push("/home"):W.alert("您当前是访客，请使用管理员账号登录！","权限提示",{confirmButtonText:"确定",type:"warning"})},w=e=>{"logout"===e&&b()},b=()=>{W.confirm("确定要退出登录吗？","退出确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),M.success("已退出登录"),t.push("/login")}).catch(()=>{})};return(e,t)=>{const a=F,l=J,n=X,p=Y,h=V,b=Z,C=ee,P=T("router-view"),x=te,S=ae;return r(),i(S,{class:"layout-container"},{default:d(()=>[u(C,{class:"header"},{default:d(()=>[m("div",De,[m("div",Fe,[u(a,null,{default:d(()=>[u(c($))]),_:1}),t[0]||(t[0]=m("span",null,"ST-TG网盘",-1))]),m("div",Ve,[u(p,{onCommand:g,trigger:"click"},{dropdown:d(()=>[u(n,null,{default:d(()=>[u(l,{command:"light",icon:c(G)},{default:d(()=>t[1]||(t[1]=[f("亮色模式")])),_:1},8,["icon"]),u(l,{command:"dark",icon:c(K)},{default:d(()=>t[2]||(t[2]=[f("暗色模式")])),_:1},8,["icon"]),u(l,{command:"auto",icon:c(Q)},{default:d(()=>t[3]||(t[3]=[f("跟随系统")])),_:1},8,["icon"])]),_:1})]),default:d(()=>[m("span",Ne,[u(a,{size:20},{default:d(()=>[(r(),i(E(s.value)))]),_:1})])]),_:1}),u(h,{type:"info",plain:"",onClick:_},{default:d(()=>t[4]||(t[4]=[f("关于")])),_:1}),u(h,{type:"primary",plain:"",onClick:k},{default:d(()=>t[5]||(t[5]=[f("管理")])),_:1}),o.value?(r(),i(p,{key:1,onCommand:w,trigger:"click"},{dropdown:d(()=>[u(n,null,{default:d(()=>[u(l,{command:"logout",icon:c(H)},{default:d(()=>t[7]||(t[7]=[f("退出登录")])),_:1},8,["icon"])]),_:1})]),default:d(()=>[u(b,{size:32,src:"/favicon.ico",style:{cursor:"pointer"}})]),_:1})):(r(),i(h,{key:0,type:"primary",onClick:v},{default:d(()=>t[6]||(t[6]=[f("登录")])),_:1}))])])]),_:1}),u(x,{class:"main-content"},{default:d(()=>[u(P,null,{default:d(({Component:e})=>[u(y,{name:"fade",mode:"out-in"},{default:d(()=>[(r(),i(E(e)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-e5eb62d0"]]),children:[{path:"",component:()=>je(()=>import("./UploadPage-CTnD719u.js"),__vite__mapDeps([8,1,2,4,9,10,11,12,13]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"visitor"}},{path:"login",component:He},{path:"about",component:()=>je(()=>import("./AboutPage-cGQmubvk.js"),__vite__mapDeps([14,1,2,4,15,12,16]),import.meta.url)}]},{path:"/",component:Me(o({__name:"AdminLayout",setup(e){const t=x(),a=S(),o=n(()=>a.path),s=l(!1),p=l("auto"),g=l(!1),h=l(!1),_=n(()=>"light"===p.value?G:"dark"===p.value?K:Q),k=()=>{if("auto"===p.value){const e=window.matchMedia("(prefers-color-scheme: dark)");document.documentElement.classList.toggle("dark",e.matches)}else document.documentElement.classList.toggle("dark","dark"===p.value)},w=e=>{p.value=e,localStorage.setItem("theme",e),k()},b=e=>{"auto"===p.value&&document.documentElement.classList.toggle("dark",e.matches)},L=()=>{if(g.value=window.innerWidth<768,g.value)s.value=!0;else{const e=localStorage.getItem("sidebarState");s.value="collapsed"===e}};P(()=>{if(L(),window.addEventListener("resize",L),!g.value){const e=localStorage.getItem("sidebarState");s.value="collapsed"===e}const e=localStorage.getItem("theme");p.value=e||"auto",k(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",b)}),C(()=>{window.removeEventListener("resize",L),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",b)});const I=()=>{s.value=!s.value,localStorage.setItem("sidebarState",s.value?"collapsed":"expanded")},q=e=>{"logout"===e&&(localStorage.removeItem("token"),t.push("/login"))},R=e=>{t.push(e)},M=e=>{R(e),h.value=!1};return(e,t)=>{const a=F,l=J,n=X,p=Y,k=Z,b=ee,C=pe,P=me,x=ge,S=he,L=T("router-view"),z=te,O=ae;return r(),i(O,{class:"app-container"},{default:d(()=>[u(b,{class:"header"},{default:d(()=>[m("div",We,[m("div",$e,[u(a,{class:"toggle-sidebar hidden-xs-only",onClick:I},{default:d(()=>[s.value?(r(),i(c(le),{key:0})):(r(),i(c(oe),{key:1}))]),_:1}),u(a,{class:"logo-icon"},{default:d(()=>[u(c(Q))]),_:1}),U(m("span",Ge,"ST-TG网盘管理",512),[[A,!s.value]])])]),m("div",Ke,[u(a,{class:"toggle-mobile-sidebar hidden-sm-and-up",onClick:t[0]||(t[0]=e=>h.value=!0)},{default:d(()=>[u(c(oe))]),_:1}),u(p,{onCommand:w,trigger:"click"},{dropdown:d(()=>[u(n,null,{default:d(()=>[u(l,{command:"light",icon:c(G)},{default:d(()=>t[2]||(t[2]=[f("亮色模式")])),_:1},8,["icon"]),u(l,{command:"dark",icon:c(K)},{default:d(()=>t[3]||(t[3]=[f("暗色模式")])),_:1},8,["icon"]),u(l,{command:"auto",icon:c(Q)},{default:d(()=>t[4]||(t[4]=[f("跟随系统")])),_:1},8,["icon"])]),_:1})]),default:d(()=>[m("span",Qe,[u(a,{size:20},{default:d(()=>[(r(),i(E(_.value)))]),_:1})])]),_:1}),u(p,{onCommand:q},{dropdown:d(()=>[u(n,null,{default:d(()=>[u(l,{command:"logout",icon:c(H)},{default:d(()=>t[5]||(t[5]=[f("退出登录")])),_:1},8,["icon"])]),_:1})]),default:d(()=>[u(k,{class:"user-avatar",size:32,src:"/favicon.ico"})]),_:1})])]),_:1}),u(O,{class:"main-container"},{default:d(()=>[g.value?v("",!0):(r(),i(x,{key:0,width:s.value?"64px":"220px",class:"sidebar"},{default:d(()=>[u(P,{"default-active":o.value,class:"sidebar-menu",onSelect:R,collapse:s.value,"collapse-transition":!1},{default:d(()=>[u(C,{index:"/home"},{title:d(()=>t[6]||(t[6]=[f("首页")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(se))]),_:1})]),_:1}),u(C,{index:"/fileList"},{title:d(()=>t[7]||(t[7]=[f("文件列表")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(ne))]),_:1})]),_:1}),u(C,{index:"/changePassword"},{title:d(()=>t[8]||(t[8]=[f("修改密码")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(re))]),_:1})]),_:1}),u(C,{index:"/"},{title:d(()=>t[9]||(t[9]=[f("上传文件")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(ie))]),_:1})]),_:1}),u(C,{index:"/backup"},{title:d(()=>t[10]||(t[10]=[f("备份数据库")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(ue))]),_:1})]),_:1}),u(C,{index:"/bot-keep-alive"},{title:d(()=>t[11]||(t[11]=[f("机器人保活")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(de))]),_:1})]),_:1}),u(C,{index:"/webdav-config"},{title:d(()=>t[12]||(t[12]=[f("WebDAV配置")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(ce))]),_:1})]),_:1})]),_:1},8,["default-active","collapse"])]),_:1},8,["width"])),g.value?(r(),i(S,{key:1,modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e),direction:"ltr","with-header":!1,size:"220px"},{default:d(()=>[u(P,{"default-active":o.value,class:"sidebar-menu",onSelect:M,collapse:!1,"collapse-transition":!1},{default:d(()=>[u(C,{index:"/home"},{title:d(()=>t[13]||(t[13]=[f("首页")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(se))]),_:1})]),_:1}),u(C,{index:"/fileList"},{title:d(()=>t[14]||(t[14]=[f("文件列表")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(ne))]),_:1})]),_:1}),u(C,{index:"/changePassword"},{title:d(()=>t[15]||(t[15]=[f("修改密码")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(re))]),_:1})]),_:1}),u(C,{index:"/"},{title:d(()=>t[16]||(t[16]=[f("上传文件")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(ie))]),_:1})]),_:1}),u(C,{index:"/backup"},{title:d(()=>t[17]||(t[17]=[f("备份数据库")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(ue))]),_:1})]),_:1}),u(C,{index:"/bot-keep-alive"},{title:d(()=>t[18]||(t[18]=[f("机器人保活")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(de))]),_:1})]),_:1}),u(C,{index:"/webdav-config"},{title:d(()=>t[19]||(t[19]=[f("WebDAV配置")])),default:d(()=>[u(a,null,{default:d(()=>[u(c(ce))]),_:1})]),_:1})]),_:1},8,["default-active"])]),_:1},8,["modelValue"])):v("",!0),u(z,{class:"main-content"},{default:d(()=>[u(L,null,{default:d(({Component:e})=>[u(y,{name:"fade",mode:"out-in"},{default:d(()=>[(r(),i(E(e)))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-1d69cefc"]]),meta:{requiresAuth:!0,requiredRole:"admin"},children:[{path:"home",component:()=>je(()=>import("./Home-Dgb7ytGW.js"),__vite__mapDeps([17,1,3,4,2,18,10,19,20,16,21,12,6]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"fileList",component:()=>je(()=>import("./FileList-DnraZ6Ho.js"),__vite__mapDeps([22,1,3,4,2,23,12,16,21,11,7]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"changePassword",component:()=>je(()=>import("./ChangePassword-C_CGscir.js"),__vite__mapDeps([24,1,2,3,4,25,12,6]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"backup",component:()=>je(()=>import("./BackupPage-CI6kfu-G.js"),__vite__mapDeps([26,2,1,3,4,27,12,13,20]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"bot-keep-alive",component:()=>je(()=>import("./BotKeepAlivePage-J-ZRscKY.js"),__vite__mapDeps([28,2,1,4,29,12,19,16,20,30]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"webdav-config",component:()=>je(()=>import("./WebDavConfigPage-BunD0gyU.js"),__vite__mapDeps([31,2,1,4,32,30,12,6,16,21,20]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}}]},{path:"/login",component:He},{path:"/:pathMatch(.*)*",redirect:"/"}],Xe=L({history:I(),routes:Je});Xe.beforeEach((e,t,a)=>{const l=localStorage.getItem("token"),o=localStorage.getItem("role");!e.meta.requiresAuth||l?e.meta.requiredRole?"admin"===o||"visitor"===o&&"visitor"===e.meta.requiredRole?a():a("/"):a():a("/login")});const Ye=q(Oe);for(const[Ze,et]of Object.entries(fe))Ye.component(Ze,et);Ye.use(ve,{message:{position:"top-center",duration:2e3,zIndex:2e4}}),Ye.use(Xe),Ye.mount("#app");export{Me as _,ke as f,_e as u};
