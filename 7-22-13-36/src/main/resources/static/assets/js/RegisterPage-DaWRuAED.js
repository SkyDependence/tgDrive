import{_ as e}from"./_plugin-vue_export-helper-Bm9C0Znx.js";/* empty css                     *//* empty css                 */import{d as a,r,c as s,a as l,P as o,H as i,ah as t,$ as u,au as d,ac as p,o as n,u as m,R as c,O as g}from"./vue-vendor-B9yd_xiB.js";import{d as f,B as v,_ as w,$ as _,w as b,a as h,z as x,A as y,f as V}from"./element-plus-B6Syq966.js";import{s as j}from"./request-BlLXdTX7.js";import"./vendor-DO3eE842.js";const P={class:"register-page-container"},z={class:"register-card"},k={class:"register-header"},q=e(a({__name:"RegisterPage",setup(e){const a=d(),q=r(),R=r(!1),U=r({username:"",password:"",confirmPassword:""}),S={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(e,a)=>a===U.value.password,message:"两次输入密码不一致",trigger:"blur"}]},T=async()=>{if(q.value)try{await q.value.validate(),R.value=!0;const e=await j.post("/auth/register",{username:U.value.username,password:U.value.password});1===e.data.code?(h.success("注册成功，请登录"),a.push("/login")):h.error(e.data.msg||"注册失败")}catch(e){h.error("注册失败，请重试")}finally{R.value=!1}};return(e,a)=>{const r=f,d=x,h=y,j=V,$=p("router-link"),A=v;return n(),s("div",P,[l("div",z,[l("div",k,[o(r,{size:28,color:"var(--el-color-primary)"},{default:i(()=>[o(m(w))]),_:1}),a[3]||(a[3]=l("h2",{class:"register-title"},"创建账户",-1)),a[4]||(a[4]=l("p",{class:"register-subtitle"},"注册以开始使用 ST-TG网盘",-1))]),o(A,{model:U.value,rules:S,ref_key:"registerFormRef",ref:q,"label-position":"top",onKeyup:t(T,["enter"]),onSubmit:u(T,["prevent"]),class:"register-form"},{default:i(()=>[o(h,{label:"用户名",prop:"username"},{default:i(()=>[o(d,{modelValue:U.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.username=e),placeholder:"请输入用户名","prefix-icon":m(_),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(h,{label:"密码",prop:"password"},{default:i(()=>[o(d,{modelValue:U.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.password=e),type:"password",placeholder:"请输入密码","show-password":"","prefix-icon":m(b),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(h,{label:"确认密码",prop:"confirmPassword"},{default:i(()=>[o(d,{modelValue:U.value.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.confirmPassword=e),type:"password",placeholder:"请确认密码","show-password":"","prefix-icon":m(b),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(h,null,{default:i(()=>[o(j,{type:"primary",onClick:T,loading:R.value,class:"register-button",size:"large",block:""},{default:i(()=>[c(g(R.value?"注册中...":"注 册"),1)]),_:1},8,["loading"])]),_:1}),o(h,{class:"login-link"},{default:i(()=>[o($,{to:"/login"},{default:i(()=>a[5]||(a[5]=[c("已有账户？立即登录")])),_:1})]),_:1})]),_:1},8,["model"])])])}}}),[["__scopeId","data-v-03f0a2f2"]]);export{q as default};
