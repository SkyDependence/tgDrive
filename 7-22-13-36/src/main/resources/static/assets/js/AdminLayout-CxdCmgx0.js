import{_ as e}from"./_plugin-vue_export-helper-Bm9C0Znx.js";import{u as a}from"./useSEO-KdhnDgah.js";/* empty css                   */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                        *//* empty css                     */import{d as t,j as l,b as o,f as s,z as d,H as n,I as i,aw as u,ax as c,ae as r,o as m,Q as f,a as p,u as v,J as g,K as _,S as h,M as b,O as k,T as w}from"./vue-vendor-uyOI1CZy.js";import{a8 as x,aj as y,ak as S,ab as j,a9 as L,aa as E,ac as I,al as z,am as C,an as A,ao as U,J as V,ap as q,a3 as M,s as T,d as P,ad as W,ae as D,af as J,ag as O,ah as $,aq as G,ar as H,as as K,at as N,ai as Q}from"./element-plus-Kv_AC7qh.js";import{s as R}from"./request-DEbmt4v_.js";import"./vendor-DlW7-jsh.js";const B={class:"header-logo"},F={class:"logo-container"},X={class:"logo-text hidden-xs-only"},Y={class:"header-actions"},Z={class:"el-dropdown-link"},ee=e(t({__name:"AdminLayout",setup(e){const t=u(),ee=c();a();const ae=l(()=>ee.path),te=o(!1),le=o("auto"),oe=o(!1),se=o(!1),de=l(()=>"light"===le.value?L:"dark"===le.value?E:j),ne=()=>{if("auto"===le.value){const e=window.matchMedia("(prefers-color-scheme: dark)");document.documentElement.classList.toggle("dark",e.matches)}else document.documentElement.classList.toggle("dark","dark"===le.value)},ie=e=>{le.value=e,localStorage.setItem("theme",e),ne()},ue=e=>{"auto"===le.value&&document.documentElement.classList.toggle("dark",e.matches)},ce=()=>{if(oe.value=window.innerWidth<768,oe.value)te.value=!0;else{const e=localStorage.getItem("sidebarState");te.value="collapsed"===e}},re=e=>{const a=document.body;if(e.enabled&&e.imageUrl){a.style.backgroundImage=`url(${e.imageUrl})`,a.style.backgroundSize=e.mode||"cover",a.style.backgroundRepeat="repeat"===e.mode?"repeat":"no-repeat",a.style.backgroundPosition="center",a.style.backgroundAttachment="fixed"===e.mode?"fixed":"scroll";let t=document.querySelector(".background-overlay");if(t)t.style.opacity=""+(100-(e.opacity||80))/100;else{const t=document.createElement("div");t.className="background-overlay",t.style.cssText=`\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: var(--el-bg-color);\n        opacity: ${(100-(e.opacity||80))/100};\n        pointer-events: none;\n        z-index: -1;\n      `,a.appendChild(t)}}else{a.style.backgroundImage="";const e=document.querySelector(".background-overlay");e&&e.remove()}},me=e=>{const a=e.detail;re(a)};s(()=>{if(ce(),window.addEventListener("resize",ce),!oe.value){const e=localStorage.getItem("sidebarState");te.value="collapsed"===e}const e=localStorage.getItem("theme");le.value=e||"auto",ne(),(async()=>{try{const e=await R.get("/misc/background");if(1===e.data.code){const a=e.data.data;re(a)}}catch(e){}})(),window.addEventListener("backgroundSettingsUpdated",me),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ue)}),d(()=>{window.removeEventListener("resize",ce),window.removeEventListener("backgroundSettingsUpdated",me),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",ue)});const fe=()=>{te.value=!te.value,localStorage.setItem("sidebarState",te.value?"collapsed":"expanded")},pe=e=>{"logout"===e&&(localStorage.removeItem("token"),t.push("/login"))},ve=e=>{t.push(e)},ge=e=>{ve(e),se.value=!1};return(e,a)=>{const t=P,l=W,o=D,s=J,d=O,u=$,c=G,R=H,ee=K,le=N,ne=r("router-view"),ue=Q,ce=x;return m(),n(ce,{class:"app-container"},{default:i(()=>[f(u,{class:"header"},{default:i(()=>[p("div",B,[p("div",F,[f(t,{class:"toggle-sidebar hidden-xs-only",onClick:fe},{default:i(()=>[te.value?(m(),n(v(y),{key:0})):(m(),n(v(S),{key:1}))]),_:1}),f(t,{class:"logo-icon"},{default:i(()=>[f(v(j))]),_:1}),g(p("span",X,"ST-TG网盘管理",512),[[_,!te.value]])])]),p("div",Y,[f(t,{class:"toggle-mobile-sidebar hidden-sm-and-up",onClick:a[0]||(a[0]=e=>se.value=!0)},{default:i(()=>[f(v(S))]),_:1}),f(s,{onCommand:ie,trigger:"click"},{dropdown:i(()=>[f(o,null,{default:i(()=>[f(l,{command:"light",icon:v(L)},{default:i(()=>a[2]||(a[2]=[h("亮色模式")])),_:1},8,["icon"]),f(l,{command:"dark",icon:v(E)},{default:i(()=>a[3]||(a[3]=[h("暗色模式")])),_:1},8,["icon"]),f(l,{command:"auto",icon:v(j)},{default:i(()=>a[4]||(a[4]=[h("跟随系统")])),_:1},8,["icon"])]),_:1})]),default:i(()=>[p("span",Z,[f(t,{size:20},{default:i(()=>[(m(),n(b(de.value)))]),_:1})])]),_:1}),f(s,{onCommand:pe},{dropdown:i(()=>[f(o,null,{default:i(()=>[f(l,{command:"logout",icon:v(I)},{default:i(()=>a[5]||(a[5]=[h("退出登录")])),_:1},8,["icon"])]),_:1})]),default:i(()=>[f(d,{class:"user-avatar",size:32,src:"/favicon.ico"})]),_:1})])]),_:1}),f(ce,{class:"main-container"},{default:i(()=>[oe.value?k("",!0):(m(),n(ee,{key:0,width:te.value?"64px":"220px",class:"sidebar"},{default:i(()=>[f(R,{"default-active":ae.value,class:"sidebar-menu",onSelect:ve,collapse:te.value,"collapse-transition":!1},{default:i(()=>[f(c,{index:"/home"},{title:i(()=>a[6]||(a[6]=[h("首页")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(z))]),_:1})]),_:1}),f(c,{index:"/fileList"},{title:i(()=>a[7]||(a[7]=[h("文件列表")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(C))]),_:1})]),_:1}),f(c,{index:"/changePassword"},{title:i(()=>a[8]||(a[8]=[h("修改密码")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(A))]),_:1})]),_:1}),f(c,{index:"/"},{title:i(()=>a[9]||(a[9]=[h("上传文件")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(U))]),_:1})]),_:1}),f(c,{index:"/backup"},{title:i(()=>a[10]||(a[10]=[h("备份数据库")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(V))]),_:1})]),_:1}),f(c,{index:"/bot-keep-alive"},{title:i(()=>a[11]||(a[11]=[h("机器人保活")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(q))]),_:1})]),_:1}),f(c,{index:"/webdav-config"},{title:i(()=>a[12]||(a[12]=[h("WebDAV配置")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(M))]),_:1})]),_:1}),f(c,{index:"/misc-settings"},{title:i(()=>a[13]||(a[13]=[h("杂项管理")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(T))]),_:1})]),_:1})]),_:1},8,["default-active","collapse"])]),_:1},8,["width"])),oe.value?(m(),n(le,{key:1,modelValue:se.value,"onUpdate:modelValue":a[1]||(a[1]=e=>se.value=e),direction:"ltr","with-header":!1,size:"220px"},{default:i(()=>[f(R,{"default-active":ae.value,class:"sidebar-menu",onSelect:ge,collapse:!1,"collapse-transition":!1},{default:i(()=>[f(c,{index:"/home"},{title:i(()=>a[14]||(a[14]=[h("首页")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(z))]),_:1})]),_:1}),f(c,{index:"/fileList"},{title:i(()=>a[15]||(a[15]=[h("文件列表")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(C))]),_:1})]),_:1}),f(c,{index:"/changePassword"},{title:i(()=>a[16]||(a[16]=[h("修改密码")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(A))]),_:1})]),_:1}),f(c,{index:"/"},{title:i(()=>a[17]||(a[17]=[h("上传文件")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(U))]),_:1})]),_:1}),f(c,{index:"/backup"},{title:i(()=>a[18]||(a[18]=[h("备份数据库")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(V))]),_:1})]),_:1}),f(c,{index:"/bot-keep-alive"},{title:i(()=>a[19]||(a[19]=[h("机器人保活")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(q))]),_:1})]),_:1}),f(c,{index:"/webdav-config"},{title:i(()=>a[20]||(a[20]=[h("WebDAV配置")])),default:i(()=>[f(t,null,{default:i(()=>[f(v(M))]),_:1})]),_:1})]),_:1},8,["default-active"])]),_:1},8,["modelValue"])):k("",!0),f(ue,{class:"main-content"},{default:i(()=>[f(ne,null,{default:i(({Component:e})=>[f(w,{name:"fade",mode:"out-in"},{default:i(()=>[(m(),n(b(e)))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-658f2394"]]);export{ee as default};
