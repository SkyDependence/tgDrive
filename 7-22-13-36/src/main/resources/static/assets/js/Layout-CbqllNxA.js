import{_ as e}from"./_plugin-vue_export-helper-Bm9C0Znx.js";/* empty css                         *//* empty css                        *//* empty css                  *//* empty css                     */import{d as a,r as t,j as o,f as l,y as s,G as n,H as c,au as r,ac as u,o as i,P as d,a as m,u as p,R as f,L as g,T as _}from"./vue-vendor-B9yd_xiB.js";import{a5 as h,X as v,a6 as k,a7 as y,a8 as w,a9 as j,aa as I,y as S,a as C,d as L,ab as T,ac as x,ad as E,f as b,ae as B,af as M,ag as z}from"./element-plus-DGu32Jg7.js";const G={class:"header-content"},A={class:"logo"},H={class:"actions"},P={class:"el-dropdown-link",style:{outline:"none",cursor:"pointer"}},R=e(a({__name:"Layout",setup(e){const a=r(),R=t("auto"),X=o(()=>!!localStorage.getItem("token")),q=o(()=>"light"===R.value?k:"dark"===R.value?y:w),D=()=>{if("auto"===R.value){const e=window.matchMedia("(prefers-color-scheme: dark)");document.documentElement.classList.toggle("dark",e.matches)}else document.documentElement.classList.toggle("dark","dark"===R.value)},F=e=>{R.value=e,localStorage.setItem("theme",e),D()},J=e=>{"auto"===R.value&&document.documentElement.classList.toggle("dark",e.matches)};l(()=>{const e=localStorage.getItem("theme");R.value=e||"auto",D(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",J)}),s(()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",J)});const K=()=>{a.push("/login")},N=()=>{a.push("/about")},O=()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("role");e&&"visitor"!==t?a.push("/home"):S.alert("您当前是访客，请使用管理员账号登录！","权限提示",{confirmButtonText:"确定",type:"warning"})},Q=e=>{"logout"===e?U():"files"===e&&a.push("/user-files")},U=()=>{S.confirm("确定要退出登录吗？","退出确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),C.success("已退出登录"),a.push("/login")}).catch(()=>{})};return(e,a)=>{const t=L,o=T,l=x,s=E,r=b,S=B,C=M,R=u("router-view"),D=z,J=h;return i(),n(J,{class:"layout-container"},{default:c(()=>[d(C,{class:"header"},{default:c(()=>[m("div",G,[m("div",A,[d(t,null,{default:c(()=>[d(p(v))]),_:1}),a[0]||(a[0]=m("span",null,"ST-TG网盘",-1))]),m("div",H,[d(s,{onCommand:F,trigger:"click"},{dropdown:c(()=>[d(l,null,{default:c(()=>[d(o,{command:"light",icon:p(k)},{default:c(()=>a[1]||(a[1]=[f("亮色模式")])),_:1},8,["icon"]),d(o,{command:"dark",icon:p(y)},{default:c(()=>a[2]||(a[2]=[f("暗色模式")])),_:1},8,["icon"]),d(o,{command:"auto",icon:p(w)},{default:c(()=>a[3]||(a[3]=[f("跟随系统")])),_:1},8,["icon"])]),_:1})]),default:c(()=>[m("span",P,[d(t,{size:20},{default:c(()=>[(i(),n(g(q.value)))]),_:1})])]),_:1}),d(r,{type:"info",plain:"",onClick:N},{default:c(()=>a[4]||(a[4]=[f("关于")])),_:1}),d(r,{type:"primary",plain:"",onClick:O},{default:c(()=>a[5]||(a[5]=[f("管理")])),_:1}),X.value?(i(),n(s,{key:1,onCommand:Q,trigger:"click"},{dropdown:c(()=>[d(l,null,{default:c(()=>[d(o,{command:"files",icon:p(j)},{default:c(()=>a[7]||(a[7]=[f("我的文件")])),_:1},8,["icon"]),d(o,{command:"logout",icon:p(I)},{default:c(()=>a[8]||(a[8]=[f("退出登录")])),_:1},8,["icon"])]),_:1})]),default:c(()=>[d(S,{size:32,src:"/favicon.ico",style:{cursor:"pointer"}})]),_:1})):(i(),n(r,{key:0,type:"primary",onClick:K},{default:c(()=>a[6]||(a[6]=[f("登录")])),_:1}))])])]),_:1}),d(D,{class:"main-content"},{default:c(()=>[d(R,null,{default:c(({Component:e})=>[d(_,{name:"fade",mode:"out-in"},{default:c(()=>[(i(),n(g(e)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-40265fc1"]]);export{R as default};
