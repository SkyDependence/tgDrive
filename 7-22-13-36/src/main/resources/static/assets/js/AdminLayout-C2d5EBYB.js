import{_ as e}from"./_plugin-vue_export-helper-Bm9C0Znx.js";import{u as a}from"./useSEO-3LZaHzlG.js";/* empty css                   */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                        *//* empty css                     */import{d as t,j as l,r as o,f as s,y as d,G as n,H as u,au as i,av as c,ac as r,o as m,P as f,a as p,u as v,I as g,J as _,R as h,L as b,M as k,T as x}from"./vue-vendor-B9yd_xiB.js";import{a8 as y,aj as w,ak as S,ab as j,a9 as L,aa as I,ac as E,al as z,am as C,an as V,ao as q,J as A,ap as M,a3 as P,d as T,ad as U,ae as W,af as D,ag as G,ah as J,aq as R,ar as $,as as H,at as N,ai as O}from"./element-plus-B6Syq966.js";import{s as B}from"./request-BlLXdTX7.js";import"./vendor-DO3eE842.js";const F={class:"header-logo"},K={class:"logo-container"},Q={class:"logo-text hidden-xs-only"},X={class:"header-actions"},Y={class:"el-dropdown-link"},Z=e(t({__name:"AdminLayout",setup(e){const t=i(),Z=c();a();const ee=l(()=>Z.path),ae=o(!1),te=o("auto"),le=o(!1),oe=o(!1),se=l(()=>"light"===te.value?L:"dark"===te.value?I:j),de=()=>{if("auto"===te.value){const e=window.matchMedia("(prefers-color-scheme: dark)");document.documentElement.classList.toggle("dark",e.matches)}else document.documentElement.classList.toggle("dark","dark"===te.value)},ne=e=>{te.value=e,localStorage.setItem("theme",e),de()},ue=e=>{"auto"===te.value&&document.documentElement.classList.toggle("dark",e.matches)},ie=()=>{if(le.value=window.innerWidth<768,le.value)ae.value=!0;else{const e=localStorage.getItem("sidebarState");ae.value="collapsed"===e}},ce=e=>{const a=document.body;if(e.enabled&&e.imageUrl){a.style.backgroundImage=`url(${e.imageUrl})`,a.style.backgroundSize=e.mode||"cover",a.style.backgroundRepeat="repeat"===e.mode?"repeat":"no-repeat",a.style.backgroundPosition="center",a.style.backgroundAttachment="fixed"===e.mode?"fixed":"scroll";let t=document.querySelector(".background-overlay");if(t)t.style.opacity=""+(100-(e.opacity||80))/100;else{const t=document.createElement("div");t.className="background-overlay",t.style.cssText=`\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: var(--el-bg-color);\n        opacity: ${(100-(e.opacity||80))/100};\n        pointer-events: none;\n        z-index: -1;\n      `,a.appendChild(t)}}else{a.style.backgroundImage="";const e=document.querySelector(".background-overlay");e&&e.remove()}};s(()=>{if(ie(),window.addEventListener("resize",ie),!le.value){const e=localStorage.getItem("sidebarState");ae.value="collapsed"===e}const e=localStorage.getItem("theme");te.value=e||"auto",de(),(async()=>{try{const e=await B.get("/misc/background");if(1===e.data.code){const a=e.data.data;ce(a)}}catch(e){}})(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ue)}),d(()=>{window.removeEventListener("resize",ie),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",ue)});const re=()=>{ae.value=!ae.value,localStorage.setItem("sidebarState",ae.value?"collapsed":"expanded")},me=e=>{"logout"===e&&(localStorage.removeItem("token"),t.push("/login"))},fe=e=>{t.push(e)},pe=e=>{fe(e),oe.value=!1};return(e,a)=>{const t=T,l=U,o=W,s=D,d=G,i=J,c=R,B=$,Z=H,te=N,de=r("router-view"),ue=O,ie=y;return m(),n(ie,{class:"app-container"},{default:u(()=>[f(i,{class:"header"},{default:u(()=>[p("div",F,[p("div",K,[f(t,{class:"toggle-sidebar hidden-xs-only",onClick:re},{default:u(()=>[ae.value?(m(),n(v(w),{key:0})):(m(),n(v(S),{key:1}))]),_:1}),f(t,{class:"logo-icon"},{default:u(()=>[f(v(j))]),_:1}),g(p("span",Q,"ST-TG网盘管理",512),[[_,!ae.value]])])]),p("div",X,[f(t,{class:"toggle-mobile-sidebar hidden-sm-and-up",onClick:a[0]||(a[0]=e=>oe.value=!0)},{default:u(()=>[f(v(S))]),_:1}),f(s,{onCommand:ne,trigger:"click"},{dropdown:u(()=>[f(o,null,{default:u(()=>[f(l,{command:"light",icon:v(L)},{default:u(()=>a[2]||(a[2]=[h("亮色模式")])),_:1},8,["icon"]),f(l,{command:"dark",icon:v(I)},{default:u(()=>a[3]||(a[3]=[h("暗色模式")])),_:1},8,["icon"]),f(l,{command:"auto",icon:v(j)},{default:u(()=>a[4]||(a[4]=[h("跟随系统")])),_:1},8,["icon"])]),_:1})]),default:u(()=>[p("span",Y,[f(t,{size:20},{default:u(()=>[(m(),n(b(se.value)))]),_:1})])]),_:1}),f(s,{onCommand:me},{dropdown:u(()=>[f(o,null,{default:u(()=>[f(l,{command:"logout",icon:v(E)},{default:u(()=>a[5]||(a[5]=[h("退出登录")])),_:1},8,["icon"])]),_:1})]),default:u(()=>[f(d,{class:"user-avatar",size:32,src:"/favicon.ico"})]),_:1})])]),_:1}),f(ie,{class:"main-container"},{default:u(()=>[le.value?k("",!0):(m(),n(Z,{key:0,width:ae.value?"64px":"220px",class:"sidebar"},{default:u(()=>[f(B,{"default-active":ee.value,class:"sidebar-menu",onSelect:fe,collapse:ae.value,"collapse-transition":!1},{default:u(()=>[f(c,{index:"/home"},{title:u(()=>a[6]||(a[6]=[h("首页")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(z))]),_:1})]),_:1}),f(c,{index:"/fileList"},{title:u(()=>a[7]||(a[7]=[h("文件列表")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(C))]),_:1})]),_:1}),f(c,{index:"/changePassword"},{title:u(()=>a[8]||(a[8]=[h("修改密码")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(V))]),_:1})]),_:1}),f(c,{index:"/"},{title:u(()=>a[9]||(a[9]=[h("上传文件")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(q))]),_:1})]),_:1}),f(c,{index:"/backup"},{title:u(()=>a[10]||(a[10]=[h("备份数据库")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(A))]),_:1})]),_:1}),f(c,{index:"/bot-keep-alive"},{title:u(()=>a[11]||(a[11]=[h("机器人保活")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(M))]),_:1})]),_:1}),f(c,{index:"/webdav-config"},{title:u(()=>a[12]||(a[12]=[h("WebDAV配置")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(P))]),_:1})]),_:1})]),_:1},8,["default-active","collapse"])]),_:1},8,["width"])),le.value?(m(),n(te,{key:1,modelValue:oe.value,"onUpdate:modelValue":a[1]||(a[1]=e=>oe.value=e),direction:"ltr","with-header":!1,size:"220px"},{default:u(()=>[f(B,{"default-active":ee.value,class:"sidebar-menu",onSelect:pe,collapse:!1,"collapse-transition":!1},{default:u(()=>[f(c,{index:"/home"},{title:u(()=>a[13]||(a[13]=[h("首页")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(z))]),_:1})]),_:1}),f(c,{index:"/fileList"},{title:u(()=>a[14]||(a[14]=[h("文件列表")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(C))]),_:1})]),_:1}),f(c,{index:"/changePassword"},{title:u(()=>a[15]||(a[15]=[h("修改密码")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(V))]),_:1})]),_:1}),f(c,{index:"/"},{title:u(()=>a[16]||(a[16]=[h("上传文件")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(q))]),_:1})]),_:1}),f(c,{index:"/backup"},{title:u(()=>a[17]||(a[17]=[h("备份数据库")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(A))]),_:1})]),_:1}),f(c,{index:"/bot-keep-alive"},{title:u(()=>a[18]||(a[18]=[h("机器人保活")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(M))]),_:1})]),_:1}),f(c,{index:"/webdav-config"},{title:u(()=>a[19]||(a[19]=[h("WebDAV配置")])),default:u(()=>[f(t,null,{default:u(()=>[f(v(P))]),_:1})]),_:1})]),_:1},8,["default-active"])]),_:1},8,["modelValue"])):k("",!0),f(ue,{class:"main-content"},{default:u(()=>[f(de,null,{default:u(({Component:e})=>[f(x,{name:"fade",mode:"out-in"},{default:u(()=>[(m(),n(b(e)))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-0628cc0a"]]);export{Z as default};
