import{_ as e}from"./_plugin-vue_export-helper-Bm9C0Znx.js";/* empty css                     *//* empty css                   *//* empty css                    *//* empty css                *//* empty css               *//* empty css                 */import{d as a,r as l,c as r,a as s,P as t,H as o,ah as i,au as u,ac as d,o as m,u as n,R as p,O as c}from"./vue-vendor-B9yd_xiB.js";import{d as g,B as f,a1 as v,$ as _,a2 as b,a3 as w,w as x,a as y,z as k,A as V,j as h,b as j,a0 as z,Y as P,f as U,D as q}from"./element-plus-BpKNpHyv.js";import{s as A}from"./request-CJwrkdbI.js";import"./vendor-BoV0XpOF.js";const $={class:"register-page-container"},Z={class:"register-card"},C={class:"register-header"},F=e(a({__name:"registerpage",setup(e){const a=u(),F=l(),R=l(!1),T=l({username:"",email:"",nickname:"",password:"",confirmPassword:""}),B=l(!1),D={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],nickname:[{max:50,message:"昵称长度不能超过 50 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:50,message:"密码长度在 8 到 50 个字符",trigger:"blur"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,}$/,message:"密码必须包含大小写字母和数字",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(e,a)=>a===T.value.password,message:"两次输入密码不一致",trigger:"blur"}]},G=async()=>{if(F.value)if(B.value)try{await F.value.validate(),R.value=!0;const e=await A.post("/api/register",{username:T.value.username,email:T.value.email,nickname:T.value.nickname||T.value.username,password:T.value.password});200===e.data.code?(y.success("注册成功，请登录"),a.push("/login")):y.error(e.data.msg||"注册失败")}catch(e){y.error("注册失败，请重试")}finally{R.value=!1}else y.warning("请先同意用户协议和隐私政策")};return(e,a)=>{const l=g,u=k,y=V,A=h,H=j,I=z,K=P,O=U,S=q,Y=d("router-link"),E=f;return m(),r("div",$,[s("div",Z,[s("div",C,[t(l,{size:32,color:"var(--el-color-primary)"},{default:o(()=>[t(n(v))]),_:1}),a[6]||(a[6]=s("h2",{class:"register-title"},"创建账户",-1)),a[7]||(a[7]=s("p",{class:"register-subtitle"},"加入 ST-TG网盘，开始您的云存储之旅",-1))]),t(E,{model:T.value,rules:D,ref_key:"registerFormRef",ref:F,"label-position":"top",onKeyup:i(G,["enter"]),class:"register-form"},{default:o(()=>[t(H,{gutter:16},{default:o(()=>[t(A,{span:24},{default:o(()=>[t(y,{label:"用户名",prop:"username"},{default:o(()=>[t(u,{modelValue:T.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>T.value.username=e),placeholder:"请输入用户名（3-20个字符）","prefix-icon":n(_),size:"large",clearable:"",autocomplete:"username"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1})]),_:1}),t(H,{gutter:16},{default:o(()=>[t(A,{span:24},{default:o(()=>[t(y,{label:"邮箱",prop:"email"},{default:o(()=>[t(u,{modelValue:T.value.email,"onUpdate:modelValue":a[1]||(a[1]=e=>T.value.email=e),type:"email",placeholder:"请输入邮箱地址","prefix-icon":n(b),size:"large",clearable:"",autocomplete:"email"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1})]),_:1}),t(H,{gutter:16},{default:o(()=>[t(A,{span:24},{default:o(()=>[t(y,{label:"昵称",prop:"nickname"},{default:o(()=>[t(u,{modelValue:T.value.nickname,"onUpdate:modelValue":a[2]||(a[2]=e=>T.value.nickname=e),placeholder:"请输入昵称（可选）","prefix-icon":n(w),size:"large",clearable:""},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1})]),_:1}),t(H,{gutter:16},{default:o(()=>[t(A,{span:24},{default:o(()=>[t(y,{label:"密码",prop:"password"},{default:o(()=>[t(u,{modelValue:T.value.password,"onUpdate:modelValue":a[3]||(a[3]=e=>T.value.password=e),type:"password",placeholder:"请输入密码（至少8位）","prefix-icon":n(x),size:"large","show-password":"",clearable:"",autocomplete:"new-password"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1})]),_:1}),t(H,{gutter:16},{default:o(()=>[t(A,{span:24},{default:o(()=>[t(y,{label:"确认密码",prop:"confirmPassword"},{default:o(()=>[t(u,{modelValue:T.value.confirmPassword,"onUpdate:modelValue":a[4]||(a[4]=e=>T.value.confirmPassword=e),type:"password",placeholder:"请再次输入密码","prefix-icon":n(x),size:"large","show-password":"",clearable:"",autocomplete:"new-password"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1})]),_:1}),t(y,{class:"agreement"},{default:o(()=>[t(K,{modelValue:B.value,"onUpdate:modelValue":a[5]||(a[5]=e=>B.value=e),size:"large"},{default:o(()=>[a[10]||(a[10]=p(" 我已阅读并同意 ")),t(I,{type:"primary",class:"terms-link"},{default:o(()=>a[8]||(a[8]=[p("《用户协议》")])),_:1}),a[11]||(a[11]=p(" 和 ")),t(I,{type:"primary",class:"privacy-link"},{default:o(()=>a[9]||(a[9]=[p("《隐私政策》")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(y,null,{default:o(()=>[t(O,{type:"primary",onClick:G,loading:R.value,disabled:!B.value,class:"register-button",size:"large",block:""},{default:o(()=>[p(c(R.value?"注册中...":"创建账户"),1)]),_:1},8,["loading","disabled"])]),_:1}),t(S,{class:"divider"},{default:o(()=>a[12]||(a[12]=[s("span",{class:"divider-text"},"或",-1)])),_:1}),t(y,{class:"login-section"},{default:o(()=>[a[14]||(a[14]=s("p",{class:"login-text"},"已有账户？",-1)),t(Y,{to:"/login",class:"login-link"},{default:o(()=>[t(O,{type:"default",size:"large",block:""},{default:o(()=>a[13]||(a[13]=[p(" 立即登录 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])])}}}),[["__scopeId","data-v-ed3cf74a"]]);export{F as default};
