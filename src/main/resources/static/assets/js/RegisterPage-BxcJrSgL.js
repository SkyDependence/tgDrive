import{_ as e}from"./_plugin-vue_export-helper-Bm9C0Znx.js";/* empty css                     *//* empty css                 */import{d as a,r,c as s,a as l,P as o,H as i,ah as t,au as u,ac as d,o as p,u as n,R as m,O as c}from"./vue-vendor-B9yd_xiB.js";import{d as g,B as f,_ as v,$ as w,w as _,a as b,z as h,A as x,f as y}from"./element-plus-B6Syq966.js";import{s as V}from"./request-BlLXdTX7.js";import"./vendor-DO3eE842.js";const j={class:"register-page-container"},P={class:"register-card"},z={class:"register-header"},k=e(a({__name:"RegisterPage",setup(e){const a=u(),k=r(),q=r(!1),R=r({username:"",password:"",confirmPassword:""}),U={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(e,a)=>a===R.value.password,message:"两次输入密码不一致",trigger:"blur"}]},T=async()=>{if(k.value)try{await k.value.validate(),q.value=!0;const e=await V.post("/api/auth/register",{username:R.value.username,password:R.value.password});200===e.data.code?(b.success("注册成功，请登录"),a.push("/login")):b.error(e.data.msg||"注册失败")}catch(e){b.error("注册失败，请重试")}finally{q.value=!1}};return(e,a)=>{const r=g,u=h,b=x,V=y,A=d("router-link"),B=f;return p(),s("div",j,[l("div",P,[l("div",z,[o(r,{size:28,color:"var(--el-color-primary)"},{default:i(()=>[o(n(v))]),_:1}),a[3]||(a[3]=l("h2",{class:"register-title"},"创建账户",-1)),a[4]||(a[4]=l("p",{class:"register-subtitle"},"注册以开始使用 ST-TG网盘",-1))]),o(B,{model:R.value,rules:U,ref_key:"registerFormRef",ref:k,"label-position":"top",onKeyup:t(T,["enter"]),class:"register-form"},{default:i(()=>[o(b,{label:"用户名",prop:"username"},{default:i(()=>[o(u,{modelValue:R.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>R.value.username=e),placeholder:"请输入用户名","prefix-icon":n(w),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(b,{label:"密码",prop:"password"},{default:i(()=>[o(u,{modelValue:R.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value.password=e),type:"password",placeholder:"请输入密码","show-password":"","prefix-icon":n(_),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(b,{label:"确认密码",prop:"confirmPassword"},{default:i(()=>[o(u,{modelValue:R.value.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>R.value.confirmPassword=e),type:"password",placeholder:"请确认密码","show-password":"","prefix-icon":n(_),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(b,null,{default:i(()=>[o(V,{type:"primary",onClick:T,loading:q.value,class:"register-button",size:"large",block:""},{default:i(()=>[m(c(q.value?"注册中...":"注 册"),1)]),_:1},8,["loading"])]),_:1}),o(b,{class:"login-link"},{default:i(()=>[o(A,{to:"/login"},{default:i(()=>a[5]||(a[5]=[m("已有账户？立即登录")])),_:1})]),_:1})]),_:1},8,["model"])])])}}}),[["__scopeId","data-v-bc5652df"]]);export{k as default};
