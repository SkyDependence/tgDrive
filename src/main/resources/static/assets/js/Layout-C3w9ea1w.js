import{_ as e}from"./_plugin-vue_export-helper-Bm9C0Znx.js";/* empty css                         *//* empty css                        *//* empty css                  *//* empty css                     */import{d as a,r as t,j as o,f as s,y as l,G as n,H as r,au as c,ac as i,o as u,P as d,a as m,u as p,R as g,L as f,T as _}from"./vue-vendor-B9yd_xiB.js";import{a8 as h,_ as v,a9 as k,aa as y,ab as w,ac as j,y as I,a as L,d as S,ad as x,ae as C,af as b,f as E,ag as T,ah as z,ai as B}from"./element-plus-B6Syq966.js";const M={class:"header-content"},G={class:"logo"},D={class:"actions"},H={class:"el-dropdown-link",style:{outline:"none",cursor:"pointer"}},P=e(a({__name:"Layout",setup(e){const a=c(),P=t("auto"),R=o(()=>!!localStorage.getItem("token")),q=o(()=>"light"===P.value?k:"dark"===P.value?y:w),A=()=>{if("auto"===P.value){const e=window.matchMedia("(prefers-color-scheme: dark)");document.documentElement.classList.toggle("dark",e.matches)}else document.documentElement.classList.toggle("dark","dark"===P.value)},F=e=>{P.value=e,localStorage.setItem("theme",e),A()},J=e=>{"auto"===P.value&&document.documentElement.classList.toggle("dark",e.matches)};s(()=>{const e=localStorage.getItem("theme");P.value=e||"auto",A(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",J)}),l(()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",J)});const K=()=>{a.push("/login")},N=()=>{a.push("/about")},O=()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("role");e&&"visitor"!==t?a.push("/home"):I.alert("您当前是访客，请使用管理员账号登录！","权限提示",{confirmButtonText:"确定",type:"warning"})},Q=e=>{"logout"===e&&U()},U=()=>{I.confirm("确定要退出登录吗？","退出确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),L.success("已退出登录"),a.push("/login")}).catch(()=>{})};return(e,a)=>{const t=S,o=x,s=C,l=b,c=E,I=T,L=z,P=i("router-view"),A=B,J=h;return u(),n(J,{class:"layout-container"},{default:r(()=>[d(L,{class:"header"},{default:r(()=>[m("div",M,[m("div",G,[d(t,{class:"logo-icon"},{default:r(()=>[d(p(v))]),_:1}),a[0]||(a[0]=m("div",{class:"logo-text"},[m("span",{class:"main-title"},"TG-Drive"),m("span",{class:"sub-title"},"Stanley_Legend")],-1))]),m("div",D,[d(l,{onCommand:F,trigger:"click"},{dropdown:r(()=>[d(s,null,{default:r(()=>[d(o,{command:"light",icon:p(k)},{default:r(()=>a[1]||(a[1]=[g("亮色模式")])),_:1},8,["icon"]),d(o,{command:"dark",icon:p(y)},{default:r(()=>a[2]||(a[2]=[g("暗色模式")])),_:1},8,["icon"]),d(o,{command:"auto",icon:p(w)},{default:r(()=>a[3]||(a[3]=[g("跟随系统")])),_:1},8,["icon"])]),_:1})]),default:r(()=>[m("span",H,[d(t,{size:20},{default:r(()=>[(u(),n(f(q.value)))]),_:1})])]),_:1}),d(c,{type:"info",plain:"",onClick:N},{default:r(()=>a[4]||(a[4]=[g("关于")])),_:1}),d(c,{type:"primary",plain:"",onClick:O},{default:r(()=>a[5]||(a[5]=[g("管理")])),_:1}),R.value?(u(),n(l,{key:1,onCommand:Q,trigger:"click"},{dropdown:r(()=>[d(s,null,{default:r(()=>[d(o,{command:"logout",icon:p(j)},{default:r(()=>a[7]||(a[7]=[g("退出登录")])),_:1},8,["icon"])]),_:1})]),default:r(()=>[d(I,{size:32,src:"/110871356.jpg",style:{cursor:"pointer"}})]),_:1})):(u(),n(c,{key:0,type:"primary",onClick:K},{default:r(()=>a[6]||(a[6]=[g("登录")])),_:1}))])])]),_:1}),d(A,{class:"main-content"},{default:r(()=>[d(P,null,{default:r(({Component:e})=>[d(_,{name:"fade",mode:"out-in"},{default:r(()=>[(u(),n(f(e)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-467393af"]]);export{P as default};
