const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./UploadPage-CuuB1R-s.js","./_plugin-vue_export-helper-DvehuVrX.js","../css/_plugin-vue_export-helper-BrWhqCnK.css","./el-tooltip-l0sNRNKZ.js","./el-collapse-transition-l0sNRNKZ.js","./vue-vendor-BNZdp1ez.js","./vendor-JtNx7una.js","./element-plus-CgPdM7LF.js","../css/UploadPage-B2UfSLa4.css","../css/el-col-Ds2mGN2S.css","../css/el-popper-PErODIEO.css","../css/el-empty-D4ZqTl4F.css","../css/el-card-fwQOLwdi.css","../css/el-progress-DBWeHy1f.css","./FileList-BCGctdCW.js","../css/FileList-tOWD3_3d.css","../css/el-table-column-DAvlKvZ1.css","../css/el-overlay-CUAhHdWP.css","../css/el-tag-DljBBxJR.css","../css/el-select-CvzM3W2w.css","../css/el-scrollbar-BWxh-h6K.css","../css/el-input-Cz--kClu.css","../css/el-checkbox-DIj50LEB.css","../css/el-button-group-ePhtJS9H.css","./LoginPage-BhPpz6l-.js","../css/LoginPage-D-QlpMj6.css","../css/el-form-item-DCFsf57O.css","./Layout-ChztRr3n.js","../css/Layout-CFKW5aqV.css","../css/el-dropdown-item-BzbYg_Ut.css","../css/el-divider-BUtF_RGI.css","./ChangePassword-DQ6fnajq.js","../css/ChangePassword-BeVuEMiE.css","./AboutPage-Bci3G5W3.js","../css/AboutPage-CVf4rYfD.css","./UserAgreementPage-CeqPy00i.js","../css/UserAgreementPage-DNNMx6zQ.css","../css/el-alert-G57rL0jl.css","./PrivacyPolicyPage-zOp77JKw.js","../css/PrivacyPolicyPage-DYXSlha6.css","./AdminLayout-OJkokFuh.js","../css/AdminLayout-0AVy-hZ3.css","./Home-iqNqWYm3.js","../css/Home-CJvuvnO_.css","../css/el-descriptions-item-o9ObloqJ.css","./BackupPage-Bcp4fqA4.js","../css/BackupPage-DylWZ5CF.css","./BotKeepAlivePage-TxvYuulQ.js","../css/BotKeepAlivePage-BYB1TQNk.css","./WebDavConfigPage-Dti4OKTQ.js","../css/WebDavConfigPage-D9WYFIV6.css","../css/el-switch-B5lTGWdM.css","./UserManagement-DoKXGQ1k.js","../css/UserManagement-DlC-DdVw.css","./registerpage-DKyWeAfM.js","../css/registerpage-C5oA0A-L.css"])))=>i.map(i=>d[i]);
import{i as e,ar as t,r as o,V as r,ag as n,h as a,as as s,a4 as i,w as l,n as c,a6 as u,af as m,c as p,e as d,o as h,t as f,ab as g,D as _,x as v,at as y,au as I,ao as E}from"./vue-vendor-BNZdp1ez.js";import{a as P}from"./vendor-JtNx7una.js";import{E as S,a as A}from"./element-plus-CgPdM7LF.js";
/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */
let b;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const O=e=>b=e,R=Symbol();function j(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var q,L;(L=q||(q={})).direct="direct",L.patchObject="patch object",L.patchFunction="patch function";const w=()=>{};function $(e,t,o,r=w){e.push(t);const n=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),r())};return!o&&d()&&h(n),n}function k(e,...t){e.slice().forEach(e=>{e(...t)})}const D=e=>e(),T=Symbol(),V=Symbol();function U(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,o)=>e.set(o,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const o in t){if(!t.hasOwnProperty(o))continue;const r=t[o],n=e[o];j(n)&&j(r)&&e.hasOwnProperty(o)&&!a(r)&&!s(r)?e[o]=U(n,r):e[o]=r}return e}const C=Symbol();function F(e){return!j(e)||!e.hasOwnProperty(C)}const{assign:M}=Object;function N(e){return!(!a(e)||!e.effect)}function x(e,t,u={},m,p,d){let h;const f=M({actions:{}},u),g={deep:!0};let _,v,y,I=[],E=[];const P=m.state.value[e];let S;function A(t){let o;_=v=!1,"function"==typeof t?(t(m.state.value[e]),o={type:q.patchFunction,storeId:e,events:y}):(U(m.state.value[e],t),o={type:q.patchObject,payload:t,storeId:e,events:y});const r=S=Symbol();c().then(()=>{S===r&&(_=!0)}),v=!0,k(I,o,m.state.value[e])}d||P||(m.state.value[e]={}),o({});const b=d?function(){const{state:e}=u,t=e?e():{};this.$patch(e=>{M(e,t)})}:w;const R=(t,o="")=>{if(T in t)return t[V]=o,t;const r=function(){O(m);const o=Array.from(arguments),n=[],a=[];let s;k(E,{args:o,name:r[V],store:L,after:function(e){n.push(e)},onError:function(e){a.push(e)}});try{s=t.apply(this&&this.$id===e?this:L,o)}catch(i){throw k(a,i),i}return s instanceof Promise?s.then(e=>(k(n,e),e)).catch(e=>(k(a,e),Promise.reject(e))):(k(n,s),s)};return r[T]=!0,r[V]=o,r},j={_p:m,$id:e,$onAction:$.bind(null,E),$patch:A,$reset:b,$subscribe(t,o={}){const r=$(I,t,o.detached,()=>n()),n=h.run(()=>l(()=>m.state.value[e],r=>{("sync"===o.flush?v:_)&&t({storeId:e,type:q.direct,events:y},r)},M({},g,o)));return r},$dispose:function(){h.stop(),I=[],E=[],m._s.delete(e)}},L=r(j);m._s.set(e,L);const C=(m._a&&m._a.runWithContext||D)(()=>m._e.run(()=>(h=n()).run(()=>t({action:R}))));for(const o in C){const t=C[o];if(a(t)&&!N(t)||s(t))d||(P&&F(t)&&(a(t)?t.value=P[o]:U(t,P[o])),m.state.value[e][o]=t);else if("function"==typeof t){const e=R(t,o);C[o]=e,f.actions[o]=t}}return M(L,C),M(i(L),C),Object.defineProperty(L,"$state",{get:()=>m.state.value[e],set:e=>{A(t=>{M(t,e)})}}),m._p.forEach(e=>{M(L,h.run(()=>e({store:L,app:m._a,pinia:m,options:f})))}),P&&d&&u.hydrate&&u.hydrate(L.$state,P),_=!0,v=!0,L}
/*! #__NO_SIDE_EFFECTS__ */function B(o,r,n){let a,s;const i="function"==typeof r;function l(o,n){const l=t();(o=o||(l?e(R,null):null))&&O(o),(o=b)._s.has(a)||(i?x(a,r,s,o):function(e,t,o){const{state:r,actions:n,getters:a}=t,s=o.state.value[e];let i;i=x(e,function(){s||(o.state.value[e]=r?r():{});const t=u(o.state.value[e]);return M(t,n,Object.keys(a||{}).reduce((t,r)=>(t[r]=m(p(()=>{O(o);const t=o._s.get(e);return a[r].call(t,t)})),t),{}))},t,o,0,!0)}(a,s,o));return o._s.get(a)}return a=o,s=i?n:r,l.$id=a,l}const J=f({__name:"App",setup:e=>(e,t)=>{const o=g("router-view");return v(),_(o)}}),W={},K=function(e,t,o){let r=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),a=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));r=Promise.allSettled(t.map(t=>{if(t=function(e,t){return new URL(e,t).href}(t,o),t in W)return;W[t]=!0;const r=t.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(!!o)for(let o=e.length-1;o>=0;o--){const n=e[o];if(n.href===t&&(!r||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${t}"]${n}`))return;const s=document.createElement("link");return s.rel=r?"stylesheet":"modulepreload",r||(s.as="script"),s.crossOrigin="",s.href=t,a&&s.setAttribute("nonce",a),document.head.appendChild(s),r?new Promise((e,o)=>{s.addEventListener("load",e),s.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};let z=null;const H=B("user",()=>{const e=o(""),t=o(""),r=o(""),n=o(""),a=o(""),s=p(()=>!!e.value),i=p(()=>"admin"===t.value?"管理员":"user"===t.value?"普通用户":"访客"),l=()=>{e.value="",t.value="",r.value="",n.value="",a.value="",localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("userId"),localStorage.removeItem("username"),localStorage.removeItem("email")};return z=l,{token:e,role:t,userId:r,username:n,email:a,isLoggedIn:s,userRoleText:i,initUserInfo:()=>{e.value=localStorage.getItem("token")||"",t.value=localStorage.getItem("role")||"",r.value=localStorage.getItem("userId")||"",n.value=localStorage.getItem("username")||"",a.value=localStorage.getItem("email")||""},setUserInfo:o=>{e.value=o.token,t.value=o.role,r.value=o.userId,n.value=o.username,a.value=o.email,localStorage.setItem("token",o.token),localStorage.setItem("role",o.role),localStorage.setItem("userId",o.userId),localStorage.setItem("username",o.username),localStorage.setItem("email",o.email)},clearUserInfo:l}}),G=new Map,Q=P.create({baseURL:"/api",timeout:3e4});Q.interceptors.request.use(e=>{const t=localStorage.getItem("token");t&&(e.headers.Authorization=`Bearer ${t}`);const o=`${e.method}_${e.url}_${JSON.stringify(e.data||{})}`;if(G.has(o)){const e=G.get(o);null==e||e.abort()}const r=new AbortController;return e.signal=r.signal,G.set(o,r),e},e=>Promise.reject(e)),Q.interceptors.response.use(e=>{const t=e.config,o=`${t.method}_${t.url}_${JSON.stringify(t.data||{})}`;return G.delete(o),e},e=>{if(e.config){const t=e.config,o=`${t.method}_${t.url}_${JSON.stringify(t.data||{})}`;G.delete(o)}return e.response&&401===e.response.status&&(z?z():(localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("userId"),localStorage.removeItem("username"),localStorage.removeItem("email")),re.push({path:"/login",query:{redirect:re.currentRoute.value.fullPath}})),Promise.reject(e)});const X=()=>K(()=>import("./UploadPage-CuuB1R-s.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url),Y=()=>K(()=>import("./FileList-BCGctdCW.js"),__vite__mapDeps([14,1,2,3,5,7,6,15,16,17,12,18,19,20,10,21,11,22,23]),import.meta.url),Z=()=>K(()=>import("./LoginPage-BhPpz6l-.js"),__vite__mapDeps([24,1,2,5,7,6,25,26,22,21]),import.meta.url),ee=()=>K(()=>import("./Layout-ChztRr3n.js"),__vite__mapDeps([27,1,2,5,7,6,28,29,30,23,10,20]),import.meta.url),te=()=>K(()=>import("./ChangePassword-DQ6fnajq.js"),__vite__mapDeps([31,1,2,7,5,6,32,12,26,21]),import.meta.url),oe=[{path:"/",component:ee,children:[{path:"",component:X,meta:{requiresAuth:!0,requiredRole:"visitor"}},{path:"login",component:Z},{path:"about",component:()=>K(()=>import("./AboutPage-Bci3G5W3.js"),__vite__mapDeps([33,1,2,5,7,34,12,18]),import.meta.url)},{path:"agreement",component:()=>K(()=>import("./UserAgreementPage-CeqPy00i.js"),__vite__mapDeps([35,1,2,5,7,36,12,30,9,37]),import.meta.url)},{path:"privacy",component:()=>K(()=>import("./PrivacyPolicyPage-zOp77JKw.js"),__vite__mapDeps([38,1,2,5,7,39,12,9,37]),import.meta.url)}]},{path:"/user",component:ee,meta:{requiresAuth:!0,requiredRole:"user"},children:[{path:"home",component:Y,meta:{requiresAuth:!0,requiredRole:"user"}},{path:"upload",component:X,meta:{requiresAuth:!0,requiredRole:"user"}},{path:"changePassword",component:te,meta:{requiresAuth:!0,requiredRole:"user"}}]},{path:"/",component:()=>K(()=>import("./AdminLayout-OJkokFuh.js"),__vite__mapDeps([40,1,2,3,5,7,41,29,17,10,23,20]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"},children:[{path:"home",component:()=>K(()=>import("./Home-iqNqWYm3.js"),__vite__mapDeps([42,1,2,4,5,7,6,43,44,30,18,19,20,10,12,26,9,21]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"fileList",component:Y,meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"changePassword",component:te,meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"backup",component:()=>K(()=>import("./BackupPage-Bcp4fqA4.js"),__vite__mapDeps([45,1,2,7,5,6,46,12,13,30]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"bot-keep-alive",component:()=>K(()=>import("./BotKeepAlivePage-TxvYuulQ.js"),__vite__mapDeps([47,1,2,7,5,6,48,12,44,18,30,37]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"webdav-config",component:()=>K(()=>import("./WebDavConfigPage-Dti4OKTQ.js"),__vite__mapDeps([49,1,2,7,5,6,50,37,12,26,21,18,19,20,10,51,30]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"user-management",component:()=>K(()=>import("./UserManagement-DoKXGQ1k.js"),__vite__mapDeps([52,1,2,3,5,7,6,53,16,18,19,20,10,17,26,12,11,22,23,51,21]),import.meta.url),meta:{requiresAuth:!0,requiredRole:"admin"}}]},{path:"/login",component:Z},{path:"/register",component:()=>K(()=>import("./registerpage-DKyWeAfM.js"),__vite__mapDeps([54,1,2,5,7,6,55,26,21]),import.meta.url),beforeEnter:async(e,t,o)=>{try{const e=await Q.get("/setting/registration-status");1===e.data.code&&e.data.data.isRegistrationAllowed?o():(S.warning("管理员已关闭注册功能"),o("/login"))}catch(r){S.error("无法获取注册状态，请稍后再试"),o("/login")}}},{path:"/:pathMatch(.*)*",redirect:"/"}],re=y({history:I(),routes:oe}),ne=["/login","/register","/agreement","/privacy","/about"];re.beforeEach(async(e,t,o)=>{localStorage.getItem("token")?"/login"===e.path?o({path:"/"}):o():-1!==ne.indexOf(e.path)?o():o({path:"/login",query:{redirect:e.fullPath}})});const ae=E(J),se=function(){const e=n(!0),t=e.run(()=>o({}));let r=[],a=[];const s=m({install(e){O(s),s._a=e,e.provide(R,s),e.config.globalProperties.$pinia=s,a.forEach(e=>r.push(e)),a=[]},use(e){return this._a?r.push(e):a.push(e),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return s}(),ie=["Upload","UploadFilled","Download","Delete","Edit","View","Search","Refresh","Setting","User","Lock","Unlock","Document","Folder","FolderOpened","Picture","VideoPlay","Close","Check","Warning","InfoFilled","SuccessFilled","CircleClose","ArrowLeft","ArrowRight","More","Plus","Minus","Star","StarFilled","Share","Link","CopyDocument","Tickets","Files","Monitor","Connection"];for(const le of ie)A[le]&&ae.component(le,A[le]);ae.use(se),ae.use(re),ae.mount("#app");export{Q as s,H as u};
