import{_ as e}from"./_plugin-vue_export-helper-DvehuVrX.js";/* empty css                         *//* empty css                   */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                        *//* empty css                     */import{d as a,b as l,aw as t,r as s,l as o,U as d,D as n,E as u,o as i,M as c,a as r,F as f,u as m,O as _,I as v,J as p,H as g,ab as h,T as k,av as w}from"./vue-vendor-CxLOoai_.js";import{ae as x,af as b,ag as y,ah as S,f as j,ar as L,as as I,ai as E,aj as z,ak as C,an as M,ao as V,ap as A,at as D,au as T,av as W,aw as q,am as P,_ as U,ax as B,ay as F,M as G,az as H,a8 as J,aA as O,aq as K}from"./element-plus-DQjCWvVU.js";const N={class:"header-logo"},Q={class:"logo-container"},R={class:"logo-text hidden-xs-only"},X={class:"header-actions"},Y={class:"el-dropdown-link"},Z=e(a({__name:"AdminLayout",setup(e){const a=w(),Z=t(),$=l(()=>Z.path),ee=s(!1),ae=s("auto"),le=s(!1),te=s(!1),se=l(()=>"light"===ae.value?x:"dark"===ae.value?b:y),oe=()=>{if("auto"===ae.value){const e=window.matchMedia("(prefers-color-scheme: dark)");document.documentElement.classList.toggle("dark",e.matches)}else document.documentElement.classList.toggle("dark","dark"===ae.value)},de=e=>{ae.value=e,localStorage.setItem("theme",e),oe()},ne=e=>{"auto"===ae.value&&document.documentElement.classList.toggle("dark",e.matches)},ue=()=>{if(le.value=window.innerWidth<768,le.value)ee.value=!0;else{const e=localStorage.getItem("sidebarState");ee.value="collapsed"===e}};o(()=>{if(ue(),window.addEventListener("resize",ue),!le.value){const e=localStorage.getItem("sidebarState");ee.value="collapsed"===e}const e=localStorage.getItem("theme");ae.value=e||"auto",oe(),(()=>{const e=document.body;e.style.backgroundImage="",e.style.backgroundColor="#ffffff";const a=document.querySelector(".background-overlay");a&&a.remove()})(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ne)}),d(()=>{window.removeEventListener("resize",ue),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",ne)});const ie=()=>{ee.value=!ee.value,localStorage.setItem("sidebarState",ee.value?"collapsed":"expanded")},ce=e=>{"logout"===e&&(localStorage.removeItem("token"),a.push("/login"))},re=e=>{a.push(e)},fe=e=>{re(e),te.value=!1};return(e,a)=>{const l=j,t=C,s=z,o=E,d=M,w=A,Z=W,ae=T,oe=D,ne=O,ue=h("router-view"),me=K,_e=S;return i(),n(_e,{class:"app-container"},{default:u(()=>[c(w,{class:"header"},{default:u(()=>[r("div",N,[r("div",Q,[c(l,{class:"toggle-sidebar hidden-xs-only",onClick:ie},{default:u(()=>[ee.value?(i(),n(m(L),{key:0})):(i(),n(m(I),{key:1}))]),_:1}),c(l,{class:"logo-icon"},{default:u(()=>[c(m(y))]),_:1}),f(r("span",R,"ST-TG网盘管理",512),[[_,!ee.value]])])]),r("div",X,[c(l,{class:"toggle-mobile-sidebar hidden-sm-and-up",onClick:a[0]||(a[0]=e=>te.value=!0)},{default:u(()=>[c(m(I))]),_:1}),c(o,{onCommand:de,trigger:"click"},{dropdown:u(()=>[c(s,null,{default:u(()=>[c(t,{command:"light",icon:m(x)},{default:u(()=>a[2]||(a[2]=[p("亮色模式")])),_:1,__:[2]},8,["icon"]),c(t,{command:"dark",icon:m(b)},{default:u(()=>a[3]||(a[3]=[p("暗色模式")])),_:1,__:[3]},8,["icon"]),c(t,{command:"auto",icon:m(y)},{default:u(()=>a[4]||(a[4]=[p("跟随系统")])),_:1,__:[4]},8,["icon"])]),_:1})]),default:u(()=>[r("span",Y,[c(l,{size:20},{default:u(()=>[(i(),n(v(se.value)))]),_:1})])]),_:1}),c(o,{onCommand:ce},{dropdown:u(()=>[c(s,null,{default:u(()=>[c(t,{command:"logout",icon:m(V)},{default:u(()=>a[5]||(a[5]=[p("退出登录")])),_:1,__:[5]},8,["icon"])]),_:1})]),default:u(()=>[c(d,{class:"user-avatar",size:32,src:"/favicon.ico"})]),_:1})])]),_:1}),c(_e,{class:"main-container"},{default:u(()=>[le.value?g("",!0):(i(),n(oe,{key:0,width:ee.value?"64px":"220px",class:"sidebar"},{default:u(()=>[c(ae,{"default-active":$.value,class:"sidebar-menu",onSelect:re,collapse:ee.value,"collapse-transition":!1},{default:u(()=>[c(Z,{index:"/home"},{title:u(()=>a[6]||(a[6]=[p("首页")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(q))]),_:1})]),_:1}),c(Z,{index:"/fileList"},{title:u(()=>a[7]||(a[7]=[p("文件列表")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(P))]),_:1})]),_:1}),c(Z,{index:"/user-management"},{title:u(()=>a[8]||(a[8]=[p("用户管理")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(U))]),_:1})]),_:1}),c(Z,{index:"/changePassword"},{title:u(()=>a[9]||(a[9]=[p("修改密码")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(B))]),_:1})]),_:1}),c(Z,{index:"/"},{title:u(()=>a[10]||(a[10]=[p("上传文件")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(F))]),_:1})]),_:1}),c(Z,{index:"/backup"},{title:u(()=>a[11]||(a[11]=[p("备份数据库")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(G))]),_:1})]),_:1}),c(Z,{index:"/bot-keep-alive"},{title:u(()=>a[12]||(a[12]=[p("机器人保活")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(H))]),_:1})]),_:1}),c(Z,{index:"/webdav-config"},{title:u(()=>a[13]||(a[13]=[p("WebDAV配置")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(J))]),_:1})]),_:1})]),_:1},8,["default-active","collapse"])]),_:1},8,["width"])),le.value?(i(),n(ne,{key:1,modelValue:te.value,"onUpdate:modelValue":a[1]||(a[1]=e=>te.value=e),direction:"ltr","with-header":!1,size:"220px"},{default:u(()=>[c(ae,{"default-active":$.value,class:"sidebar-menu",onSelect:fe,collapse:!1,"collapse-transition":!1},{default:u(()=>[c(Z,{index:"/home"},{title:u(()=>a[14]||(a[14]=[p("首页")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(q))]),_:1})]),_:1}),c(Z,{index:"/fileList"},{title:u(()=>a[15]||(a[15]=[p("文件列表")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(P))]),_:1})]),_:1}),c(Z,{index:"/user-management"},{title:u(()=>a[16]||(a[16]=[p("用户管理")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(U))]),_:1})]),_:1}),c(Z,{index:"/changePassword"},{title:u(()=>a[17]||(a[17]=[p("修改密码")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(B))]),_:1})]),_:1}),c(Z,{index:"/"},{title:u(()=>a[18]||(a[18]=[p("上传文件")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(F))]),_:1})]),_:1}),c(Z,{index:"/backup"},{title:u(()=>a[19]||(a[19]=[p("备份数据库")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(G))]),_:1})]),_:1}),c(Z,{index:"/bot-keep-alive"},{title:u(()=>a[20]||(a[20]=[p("机器人保活")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(H))]),_:1})]),_:1}),c(Z,{index:"/webdav-config"},{title:u(()=>a[21]||(a[21]=[p("WebDAV配置")])),default:u(()=>[c(l,null,{default:u(()=>[c(m(J))]),_:1})]),_:1})]),_:1},8,["default-active"])]),_:1},8,["modelValue"])):g("",!0),c(me,{class:"main-content"},{default:u(()=>[c(ue,null,{default:u(({Component:e})=>[c(k,{name:"fade",mode:"out-in"},{default:u(()=>[(i(),n(v(e)))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-a4557772"]]);export{Z as default};
